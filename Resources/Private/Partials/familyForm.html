{namespace tk=Tx_Timekeeping_ViewHelpers}

<f:form object="{family}" name="family" action="{action}">

	<f:form.errors for="family">
		<div style="background-color: #fdd; padding: 12px;">
			<f:for each="{error.errors}" as="fieldError">
				<f:translate key="Family_Error_{error.propertyName}_{fieldError.code}" default="Family_Error_{error.propertyName}_{fieldError.code}" />
			</f:for>
		</div>
	</f:form.errors>

	<table>
		<tr>
			<th><label for="name"><f:translate key="Family_Form_Name" /></label></th>
			<td>
				<f:form.textfield property="name" />
			</td>
		</tr>
		<tr>
			<th><label for="start"><f:translate key="Family_Form_StartDate" /></label></th>
			<td>
				<f:form.textfield property="start" />
			</td>
		</tr>
		<tr>
			<th><label for="end"><f:translate key="Family_Form_EndDate" /></label></th>
			<td>
				<f:form.textfield property="end" />
			</td>
		</tr>
		<tr>
			<th><f:translate key="Family_Form_Members" /></th>
			<td>
				<table>
					<f:for each="{users}" as="user">
						<tr>
							<td>{user.username}</td>
							<td>
								<tk:form.userRole name="assignments" family="{family}" user="{user}" options="{roles}" />
							</td>
						</tr>
					</f:for>
				</table>
			</td>
		</tr>
		<tr>
			<td>&nbsp;</td>
			<td><f:form.submit value="{f:translate(key:'Family_Form_Save')}" /></td>
			<td>&nbsp;</td>
		</tr>
	</table>

</f:form>